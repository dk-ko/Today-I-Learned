#CleanArchitecture

- 책에 대한 간단한 내용과   
*개인적인 생각*   
Q 궁금한 점에 대한 정리.  

---
# 9. 애플리케이션 조립하기
- 애플리케이션이 시작될 때 인스턴스화와 의존 관계를 묶기 위해서 의존성 주입 매커니즘을 이용한다.
- 모든 의존성은 안쪽으로 향해야한다.
- 이렇게 되면 코드를 테스트하기 더 쉬워진다. 한 클래스가 필요로 하는 모든 객체를 생성자로 전달할 수 있다면, 대신 목으로 전달이 가능하고, 그렇다면 격리된 단위 테스트 생성이 쉬워진다.
- 객체 인스턴스는 누가 생성 ? 중립적이며 모든 클래스에 대해 의존성을 가지는 설정 컴포넌트(configurarion component)가 있어야한다.
- 단일 책임 원칙을 위반하지만 애플리케이션의 나머지를 깔끔히 유지하기 위해 필요하다.


## 자바에서 조립하기
- main 메소드 안에서 웹 컨트롤러, 영속성 어댑터 등 모든 클래스의 인스턴스를 생성한 뒤 연결한다.
- 단) 작성할 코드량이 많다.
- 단) 외부(main)에서 생성해 주려면 모두 public 클래스여야한다.


## 스프링 클래스패스 스캐닝으로 조립
- 스프링의 클래스패스 스캐닝은 접근 가능한 모든 클래스에서 @Component 애너테이션을 확인
- 이 때 필요한 모든 필드를 인자로 받는 생성자를 가지고 있어야함.
- 단) 클래스에 프레임특화된 에너테이션을 붙이는 것 
- 단) @Component가 붙은 모든 클래스를 등록하기에 부수 효과를 야기할 수 있음 (섬세한 제어가 불가능)

## 스프링 자바 컨피그로 조립
- application contect에 추가할 bean을 등록하는 java config 설정 클래스를 만든다
- 모든 빈을 가져오는게 아닌 설정 클래스만 선택하기에 부수 효과가 일어날 가능성이 적다.
- 기능 에너테이션을 별도의 설정 모듈로 옮기는 것이 애플리케이션을 유연하게 하고, 항상 모든 것을 한꺼번에 시작할 필요 없게 한다.
	- main 어플리케이션에 붙인다면 앱이 실행될 때 바로 항상 활성화되지만 config 파일을 빠로 옮긴다면 필요할 때 활성화할 것.
- 단) 설정 클래스가 생성하는 빈이 설정 클래스와 같은 패키지에 존재하지 않으면 빈들을 public으로 만들어야 함.

## 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까?
- 클래스 패스 스캐닝은 편리하지만 규모가 커질수록 투명성이 낮아진다. 또한 테스트에서 컨텍스트 일부만 독립적으로 띄우기 어렵다.
- 어플리케이션 조립을 책임지는 전용 설정 컴포넌트를 만들면 애플리케이션이 SRP를 만족하고 서로 다른 모듈에서 독립해 쉽게 옮길 수 있다.